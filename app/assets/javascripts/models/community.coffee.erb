CivicSourcing.Community = CivicSourcing.Amorphous.extend(
  CivicSourcing.FeedableMixin
  CivicSourcing.GroupMixin

  user: DS.belongsTo "user"
  initiatives: DS.hasMany "initiative",
    async: true

  name: DS.attr()
  slug: DS.attr()
  private: DS.attr()
  overallRank: DS.attr()
  categoryRank: DS.attr()
  
  completedInitiatives: DS.attr()
  membershipSize: DS.attr()

  upload: DS.belongsTo 'upload'
  communityCategory: DS.belongsTo 'communityCategory'

  logoUrl: (->
    uploadUrl = @get("upload.file.file.url")
    if uploadUrl? then uploadUrl else "<%= asset_path('default-logo-community.png') %>"
  ).property("upload.file.file.url")
)